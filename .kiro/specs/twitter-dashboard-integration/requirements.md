# Requirements Document

## Introduction

This feature integrates Twitter/X social sentiment data into the C1 Chat dashboard, displaying real-time tweets from curated financial accounts, sentiment analysis, and allowing users to customize which accounts to monitor. The system leverages the existing Python backend Twitter monitor and presents the data in a modern, interactive UI.

## Glossary

- **C1 Dashboard**: The Next.js web application that displays trading analysis and coach insights
- **Twitter Monitor**: The Python backend service that fetches and analyzes tweets from curated accounts
- **Nitter**: A privacy-focused Twitter frontend that provides RSS feeds (free, no API key needed)
- **Stocktwits**: A social platform for traders and investors with free API access
- **Sentiment Score**: A numerical value from -1.0 (bearish) to +1.0 (bullish) indicating market sentiment
- **Curated Account**: A pre-selected Twitter account known for quality financial content
- **C1 API**: The Flask backend API that serves data to the dashboard

## Requirements

### Requirement 1: Display Twitter Sentiment Feed

**User Story:** As a trader, I want to see recent tweets from trusted financial accounts in my dashboard, so that I can quickly gauge market sentiment without leaving the app.

#### Acceptance Criteria

1. WHEN the Dashboard loads, THE C1 Dashboard SHALL fetch and display the 20 most recent tweets from curated accounts
2. WHILE displaying tweets, THE C1 Dashboard SHALL show the account name, tweet text, timestamp, and sentiment indicator for each tweet
3. THE C1 Dashboard SHALL update the Twitter feed every 5 minutes automatically
4. WHEN a tweet contains a ticker symbol, THE C1 Dashboard SHALL highlight the ticker with a colored badge
5. THE C1 Dashboard SHALL display an overall sentiment score ranging from -1.0 to +1.0 with visual indicators

### Requirement 2: Customize Monitored Accounts

**User Story:** As a trader, I want to add or remove Twitter accounts from my watchlist, so that I can focus on sources that match my trading style.

#### Acceptance Criteria

1. WHEN the user clicks the settings icon, THE C1 Dashboard SHALL display a modal with the current list of monitored accounts
2. THE C1 Dashboard SHALL allow users to add new accounts by entering a Twitter username
3. THE C1 Dashboard SHALL allow users to remove accounts by clicking a delete button
4. WHEN the user saves changes, THE C1 Dashboard SHALL persist the account list to browser storage
5. THE C1 Dashboard SHALL validate that entered usernames exist before adding them

### Requirement 3: Filter Tweets by Ticker

**User Story:** As a trader analyzing a specific stock, I want to filter tweets mentioning that ticker, so that I can see relevant social sentiment quickly.

#### Acceptance Criteria

1. WHEN the user enters a ticker symbol in the filter input, THE C1 Dashboard SHALL display only tweets mentioning that ticker
2. THE C1 Dashboard SHALL support filtering by multiple tickers separated by commas
3. WHEN no filter is applied, THE C1 Dashboard SHALL display all tweets from monitored accounts
4. THE C1 Dashboard SHALL show a count of filtered tweets versus total tweets
5. THE C1 Dashboard SHALL clear the filter when the user clicks a clear button

### Requirement 4: Display Sentiment Analysis

**User Story:** As a trader, I want to see AI-analyzed sentiment from tweets, so that I can understand the overall market mood without reading every tweet.

#### Acceptance Criteria

1. THE C1 Dashboard SHALL display an overall sentiment score with a gauge visualization
2. THE C1 Dashboard SHALL show bullish and bearish argument summaries generated by the LLM
3. THE C1 Dashboard SHALL display key themes extracted from recent tweets
4. WHEN sentiment data is loading, THE C1 Dashboard SHALL show a loading skeleton
5. THE C1 Dashboard SHALL rank accounts by influence based on tweet engagement

### Requirement 5: Integrate Stocktwits Data

**User Story:** As a trader, I want to see retail investor sentiment from Stocktwits alongside Twitter data, so that I can gauge broader market sentiment.

#### Acceptance Criteria

1. WHEN Stocktwits is enabled, THE C1 Dashboard SHALL fetch and display recent Stocktwits messages for the analyzed ticker
2. THE C1 Dashboard SHALL show the bullish/bearish ratio from Stocktwits
3. THE C1 Dashboard SHALL display Stocktwits messages with user avatars and sentiment labels
4. WHERE Stocktwits API is unavailable, THE C1 Dashboard SHALL gracefully degrade and show only Twitter data
5. THE C1 Dashboard SHALL allow users to toggle Stocktwits display on/off in settings

### Requirement 6: Backend API Integration

**User Story:** As a system, I need to expose Twitter data through the C1 API, so that the dashboard can fetch and display social sentiment.

#### Acceptance Criteria

1. THE C1 API SHALL provide an endpoint `/api/twitter/sentiment` that returns tweet data and sentiment analysis
2. THE C1 API SHALL accept a ticker parameter to filter tweets by stock symbol
3. THE C1 API SHALL accept an accounts parameter to specify which Twitter accounts to monitor
4. THE C1 API SHALL cache Twitter data for 5 minutes to reduce backend load
5. THE C1 API SHALL return error messages with appropriate HTTP status codes when data fetching fails

### Requirement 7: Real-time Updates

**User Story:** As a trader, I want the Twitter feed to update automatically, so that I always see the latest market sentiment without manual refreshing.

#### Acceptance Criteria

1. THE C1 Dashboard SHALL poll the Twitter API endpoint every 5 minutes
2. WHEN new tweets are available, THE C1 Dashboard SHALL smoothly animate them into the feed
3. THE C1 Dashboard SHALL pause auto-refresh when the user is actively scrolling the feed
4. THE C1 Dashboard SHALL resume auto-refresh 30 seconds after the user stops scrolling
5. THE C1 Dashboard SHALL display a timestamp showing when the feed was last updated

### Requirement 8: Mobile Responsive Design

**User Story:** As a mobile trader, I want the Twitter feed to work well on my phone, so that I can monitor sentiment on the go.

#### Acceptance Criteria

1. THE C1 Dashboard SHALL display tweets in a single column on screens smaller than 768 pixels wide
2. THE C1 Dashboard SHALL make the sentiment gauge touch-friendly with larger tap targets
3. THE C1 Dashboard SHALL allow horizontal swipe gestures to dismiss tweets on mobile
4. THE C1 Dashboard SHALL optimize image loading for mobile bandwidth
5. THE C1 Dashboard SHALL maintain readable font sizes on all screen sizes

### Requirement 9: Performance Optimization

**User Story:** As a user, I want the Twitter feed to load quickly, so that I can access sentiment data without delays.

#### Acceptance Criteria

1. THE C1 Dashboard SHALL implement virtual scrolling for feeds with more than 50 tweets
2. THE C1 Dashboard SHALL lazy-load tweet images as they enter the viewport
3. THE C1 Dashboard SHALL cache API responses in browser storage for 5 minutes
4. THE C1 Dashboard SHALL show cached data immediately while fetching fresh data in the background
5. THE C1 Dashboard SHALL limit the number of tweets displayed to 100 to maintain performance

### Requirement 10: Error Handling and Fallbacks

**User Story:** As a user, I want the dashboard to handle Twitter API failures gracefully, so that I can still use other features when Twitter data is unavailable.

#### Acceptance Criteria

1. WHEN the Twitter API fails, THE C1 Dashboard SHALL display a friendly error message
2. THE C1 Dashboard SHALL retry failed requests up to 3 times with exponential backoff
3. WHERE Twitter data is unavailable, THE C1 Dashboard SHALL show the last cached data with a staleness indicator
4. THE C1 Dashboard SHALL log errors to the console for debugging without exposing sensitive information
5. THE C1 Dashboard SHALL provide a manual refresh button when automatic updates fail
